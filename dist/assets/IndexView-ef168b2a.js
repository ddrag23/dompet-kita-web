import{d as C,i as K,r as s,o as w,a as S,w as l,f as b,e as a,u as g,j as U,k as q,l as m,m as k,b as A,h as v,E as I,n as L}from"./index-c2086581.js";import{u as h}from"./category-c745c9be.js";import{u as O}from"./auth-b5577836.js";const P={class:"flex flex-col md:flex-row my-2"},W=C({__name:"Table",setup(x){const t=h();return K(async()=>{await t.load(),console.log("state",t.items)}),(i,_)=>{const r=s("el-button"),y=s("EasyDataTable");return w(),S(y,{headers:g(t).headers,items:g(t).items,"show-index":""},{"item-aksi":l(c=>[b("div",P,[a(r,{type:"primary",icon:g(U),onClick:u=>i.$emit("edit",c)},null,8,["icon","onClick"]),a(r,{type:"danger",icon:g(q),onClick:u=>i.$emit("delete",c.id)},null,8,["icon","onClick"])])]),_:1},8,["headers","items"])}}}),z={class:"w-full"},G={class:"flex justify-end mb-5"},H={class:"dialog-footer"},X=C({__name:"IndexView",setup(x){const t=m(!1),i=m(!1),_=m(!1),r=h(),y=O(),c=m(),u=m(),V=k({category_name:[{required:!0,message:"Tolong input nama kategori",trigger:"blur"}]}),B=y.userLogin,o=k({category_name:null,user_id:B.id});async function T(){var e;await((e=u.value)==null?void 0:e.validate(async(n,d)=>{var f;n?(i.value=!0,console.log(o),_.value?await r.update(c.value,o):await r.submit(o),i.value=!1,t.value=!1,(f=u.value)==null||f.resetFields()):(console.log("error submit!",d),i.value=!1)})),console.log(o)}function E(){var e;t.value=!0,(e=u.value)==null||e.resetFields(),_.value=!1}function $(e){o.category_name=e.category_name,o.user_id=e.user_id,t.value=!0,_.value=!0,c.value=e.id}async function D(e){I.confirm("Data kategori akan dihapus permanen, lanjutkan?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(async()=>await r.deleteData(e)).catch(()=>{L({type:"info",message:"Delete canceled"})})}return(e,n)=>{const d=s("el-button"),f=s("el-card"),M=s("el-input"),N=s("el-form-item"),j=s("el-form"),F=s("el-dialog");return w(),A("section",z,[a(f,null,{default:l(()=>[b("div",G,[a(d,{type:"primary",icon:"Plus",onClick:E},{default:l(()=>[v("Tambah")]),_:1})]),a(W,{onEdit:$,onDelete:D})]),_:1}),a(F,{modelValue:t.value,"onUpdate:modelValue":n[2]||(n[2]=p=>t.value=p),title:"Modal Kategori"},{footer:l(()=>[b("span",H,[a(d,{onClick:n[1]||(n[1]=p=>t.value=!1)},{default:l(()=>[v("Cancel")]),_:1}),a(d,{type:"primary",onClick:T,loading:i.value},{default:l(()=>[v(" Confirm ")]),_:1},8,["loading"])])]),default:l(()=>[a(j,{ref_key:"formCategory",ref:u,model:o,rules:V,"label-width":"120px",class:"demo-ruleForm","status-icon":"","label-position":"top"},{default:l(()=>[a(N,{label:"Nama Kategori",prop:"category_name",required:""},{default:l(()=>[a(M,{modelValue:o.category_name,"onUpdate:modelValue":n[0]||(n[0]=p=>o.category_name=p)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});export{X as default};
